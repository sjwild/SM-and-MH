---
title: "DAGs Social Media"
author: "Stephen Wild"
date: "2024-09-17"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(tidyverse)
library(dagitty)
library(ggdag)

theme_set(theme_dag())

coords <- tribble(
  ~name,    ~x,  ~y,
  "MH",      2,   1,
  "SM",      1,   1,
  "Time",   1.5, 0,
  "FR",     1.25, .5,
  "FM",     1.5, 1.5,
  "OP",     1, 0,
  "OS",     1, 1.5, 
  "OA",     2, 1.5,
  "holder", 1.5, 1.05
)

```


What can we learn from some RCTs about the effect of social media on mental health? Zach Rausch and Jon Haidt have started a four-part (?) [critique](https://www.afterbabel.com/p/the-case-for-causality-part-1) of a recent [meta analysis](https://psycnet.apa.org/doiLanding?doi=10.1037%2Fppm0000541) by Chris Ferguson. This led to a bit of kerfuffle on social media after Matthew Jané [critiqued](https://matthewbjane.com/blog-posts/blog-post-6.html) Rausch and Haidt's critique. Rausch and Haidt updated their blog post, which Jané responded to [here](https://matthewbjane.com/blog-posts/blog-post-7.html). Rausch and Haidt post part two [here]().

For our purposes, the key quote comes from Jané's response to Rausch and Haidt's response. 

> In reality, I actually think that social media probably does have an average negative effect on mental health. I also probably agree that the RCTs in this meta-analysis probably won’t find any convincing causal estimates.

Jané is correct. I have no intention of discussing those studies individually or setting out what weaknesses may threaten their internal and external validity. Instead, I want to lay out why those studies, even if they had been conducted perfectly, could only ever let us estimate a small portion of the total causal effect of social media on mental health. I think this matters, because the discussion around these studies seems to imply that these studies estimate _the_ total causal effect. They do not.

## Enter DAGs
To illustrate my case, I am going to make use of Directed Acyclic Graphs (DAGs). If you don't know much about DAGs, you can stop reading here and read a great introduction to them in chapter 6 of Nick Huntington-Klein's [The Effect](https://theeffectbook.net/ch-CausalDiagrams.html). If you want more resources, I'll list a few below at the end of the post.

For what follows, I am going to use a few simple DAGs to make my point. I'm going to be a bit unorthodox with a couple of them. Because I am keeping them simple, I am going to limit the amount of information I include on them, including all the potential variables and causal paths. I'm not going to consider temporal sequence. So if you look at these DAGs and say to yourself, "These are wrong! It is much more complicated. I can do a better job!", don't worry: You are correct. I encourage you to draw them out and share them. Maybe even write a blog post explaining why I am wrong and showing us your ideal DAG.

Let's start with simple DAG. We have social media, our exposure. How am I defining social media here? It doesn't matter. Social media can include Twitter, facebook, Youtube, whatever you want. For the purposes of our DAG, it's all getting lumped together (that is also a major problem with social media research).

On to the DAG. Social media influences mental health, so we have the following DAG:

```{r simple DAG}

dagify(
  MH ~ SM,
  coords = coords
) %>% 
  ggplot(aes(x = x, y = y, xend = xend, yend = yend)) + 
  geom_dag_point() +
  geom_dag_edges() + 
  geom_dag_text() +
  lims(x = c(.75, 2.25),
       y = c(-.25, 1.75))
```


You can clearly see here that social media is affecting my mental health. The arrow goes straight from social media to my mental health. _How_ it does this, the mechanism by which social media affects my mental health, is unimportant here. All that matters for our purposes is that social media ffects my mental health.

According to Rausch and Haidt, the interventions in the Ferguson meta analysis take two forms: either reduction experiments or lab exposures. For simplicty, we're going to focus on the reduction experiments. In a reduction study, participants assigned to the treatment group are instructed to reduce their time on social media. Most participants in the treatment groups still use social media, they just use less of it. This makes "time on social media" a moderator. That is, social media affects our mental health based on how much time users spend on it. More time, worse mental health impacts, for instance. DAGs generally don't include moderators, but for our purposes (because this is illustrative and I'm being unorthodox) we're going to have it point to the causal arrow from social media to mental health. We can include it in our DAG using a [few tricks](https://github.com/r-causal/ggdag/issues/6), like so:

```{r include moderator}
dagify(
  MH ~ SM,
  holder ~ Time,
  coords = coords
) %>% 
  ggplot(aes(x = x, y = y, xend = xend, yend = yend)) + 
  geom_dag_point(data = function(x) filter(x, name != "holder")) +
  geom_dag_edges() + 
  geom_dag_text(data = function(x) filter(x, name != "holder")) +
  lims(x = c(.75, 2.25),
       y = c(-.25, 1.75))

```

## A more complicated DAG
But who else is social media affecting? Well, social media affects my friends ("FR"), for starters. All my friends are on it too, so it affects them as well. Even if social media doesn't affect their mental health at all, they could be too busy (maybe being on social media) to hang out with me, and that affects my mental health. We can add that to our DAG.

```{r bigger dAG}

dagify(
  MH ~ SM,
  FR ~ SM,
  MH ~ FR,
  holder ~ Time,
  coords = coords
) %>% 
  ggplot(aes(x = x, y = y, xend = xend, yend = yend)) + 
  geom_dag_point(data = function(x) filter(x, name != "holder")) +
  geom_dag_edges() + 
  geom_dag_text(data = function(x) filter(x, name != "holder")) +
  lims(x = c(.75, 2.25),
       y = c(-.25, 1.75))


```

And who else? People who aren't my friends. Maybe my family ("FM"). Maybe other people ("OP"). So let's add them. And social media has also contributed to other stuff ("OS"), like news coverage. Even if I'm not on social media, news headlines are optimized for them, so too the content and topics of news stories. So even if I'm not on social media, they can still affect me through this channel. So let's add that.

```{r bigget DAG}

dagify(
  MH ~ SM,
  FR ~ SM,
  FM ~ SM, 
  OS ~ SM,
  OP ~ SM,
  MH ~ FR,
  MH ~ FM,
  MH ~ OP,
  MH ~ OS,
  holder ~ Time,
  coords = coords
) %>% 
  ggplot(aes(x = x, y = y, xend = xend, yend = yend)) + 
  geom_dag_point(data = function(x) filter(x, name != "holder")) +
  geom_dag_edges() + 
  geom_dag_text(data = function(x) filter(x, name != "holder")) +
  lims(x = c(.75, 2.25),
       y = c(-.25, 1.75))


```

## But I reduced my use of social media
Now let's assume I join one of these experiments, and I reduce my social media use to zero. I throw my phone in the ocean, maybe. There is no longer a direct path from social media to me, because I am no longer using it. So let's take that out of our DAG, along with the moderator.

```{r remove SM to MH}

dagify(
  #MH ~ SM,
  FR ~ SM,
  FM ~ SM, 
  OS ~ SM,
  OP ~ SM,
  MH ~ FR,
  MH ~ FM,
  MH ~ OP,
  MH ~ OS,
  #holder ~ Time,
  coords = coords
) %>% 
  ggplot(aes(x = x, y = y, xend = xend, yend = yend)) + 
  geom_dag_point(data = function(x) filter(x, name != "holder")) +
  geom_dag_edges() + 
  geom_dag_text(data = function(x) filter(x, name != "holder")) +
  lims(x = c(.75, 2.25),
       y = c(-.25, 1.75))

```

Our DAG is still missing something. There are other things that affect my mental health. Exercise, for instance. Or spending time with friends. Or engaging in hobbies (like writing a blog post 3 people will read). So let's add them together as other activities ("OA") and draw an arrow to mental health.

```{r add OA}

dagify(
  #MH ~ SM,
  FR ~ SM,
  FM ~ SM, 
  OS ~ SM,
  OP ~ SM,
  MH ~ FR,
  MH ~ FM,
  MH ~ OP,
  MH ~ OS,
  MH ~ OA,
  #holder ~ Time,
  coords = coords
) %>% 
  ggplot(aes(x = x, y = y, xend = xend, yend = yend)) + 
  geom_dag_point(data = function(x) filter(x, name != "holder")) +
  geom_dag_edges() + 
  geom_dag_text(data = function(x) filter(x, name != "holder")) +
  lims(x = c(.75, 2.25),
       y = c(-.25, 1.75))


```

So do we see? We can see that social media still affects my mental health through my friends and through everyone else. But this DAG lets us see something clearly: what we're estimating in time reduction experiments. At best, we are estimating the causal effect of _reducing time on social media and filling that time with different activities when everyone else still uses social media as they did before I participated in the experiment_. 

So is the causal effect social media or something else? It's hard to say. There's a fixed number of hours in a day, and I need to be doing something with that time. So our causal effect may not actually the effect of social media, but could be other things. I get more exercise, maybe, which improves my mental health. Or I spend some more time with my friends, which also improves my mental health. Either of those could have improved my mental health had I replaced other activities with them and spent the same amount of time on social media.

## So what to do with the RCTs in the Ferguson meta analysis?
The answer here isn't to throw out those RCTs. They do tell us something, even if it's not what we think it is (or, at the very least, what we seem to be arguing over). But it does mean that we need to think carefully about our estimand when we conduct RCTs, and it means designing RCTs that target the estimand we want. I want to be clear that I don't know what those RCTs should look like. But there are lots of clever and competent people who do. Let's fund them and let them do their job.

## A few thank yous and some references
I want to thank a few people who read this post in advance and gave feedback: __insert names__. Before writing this post, I also put out a call on Twitter for a list of resources about the weaknesses of RCTs. I got some great articles, and a few of them have been helpful in getting me to think through how we might design different RCTs. You can find them listed in the references section below.

